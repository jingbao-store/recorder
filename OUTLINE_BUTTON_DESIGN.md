# 描边按钮设计更新

## ✅ 设计修正

根据反馈，已将按钮从**填充样式**改为**描边样式**。

---

## 🎨 新的按钮设计

### 核心特点

1. **背景透明** - 完全透明，融入黑色背景
2. **绿色描边** - Rokid Green (#40FF5E)
3. **白色文字** - 清晰易读
4. **三种状态** - 通过描边透明度区分

---

## 📊 三种状态对比

### 状态 1：常态（40% 透明度）

**触发条件**：按钮无焦点

**视觉效果**：
```
┌────────────────────┐
│ ░░░░░░░░░░░░░░░░░░ │  ← 淡绿色描边（40%）
│ │  开始录制      │ │  ← 白色文字
│ ░░░░░░░░░░░░░░░░░░ │
└────────────────────┘
黑色背景（透明按钮）
```

**特征**：
- ✅ 描边可见但不突出
- ✅ 用户知道这是一个按钮
- ✅ 不会抢占视觉焦点

---

### 状态 2：选中（80% 透明度）

**触发条件**：
- 按钮获得焦点
- 通过方向键导航到该按钮
- 应用启动时默认焦点

**视觉效果**：
```
┌────────────────────┐
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ │  ← 亮绿色描边（80%）
│ │  开始录制      │ │  ← 白色文字
│ ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓ │
└────────────────────┘
黑色背景（透明按钮）
```

**特征**：
- ✅ 描边明显变亮
- ✅ 清晰表示"当前焦点在这里"
- ✅ 提示用户可以点击触摸板

---

### 状态 3：按下（100% 透明度）

**触发条件**：
- 按钮有焦点
- 用户**点击触摸板**（ENTER 键按下）

**视觉效果**：
```
┌────────────────────┐
│ ████████████████████ │  ← 最亮绿色描边（100%）
│ │  开始录制      │ │  ← 白色文字
│ ████████████████████ │
└────────────────────┘
黑色背景（透明按钮）
```

**特征**：
- ✅ 描边达到最亮
- ✅ 瞬间反馈"已点击"
- ✅ 释放时触发动作

---

## 🔄 状态转换流程

### 完整交互流程

```
1. 应用启动
   ↓
┌─────────────┐
│ 常态 (40%)  │  ← 无焦点状态
└─────┬───────┘
      │
      │ 自动获得焦点 / 方向键导航
      ↓
┌─────────────┐
│ 选中 (80%)  │  ← 有焦点，可以点击
└─────┬───────┘
      │
      │ 点击触摸板（KeyDown）
      ↓
┌─────────────┐
│ 按下 (100%) │  ← 最亮，表示已按下
└─────┬───────┘
      │
      │ 释放触摸板（KeyUp）
      ↓
   触发动作
   （开始录制/停止录制/后台运行等）
      │
      ↓
┌─────────────┐
│ 选中 (80%)  │  ← 回到选中状态
└─────┬───────┘
      │
      │ 方向键导航离开
      ↓
┌─────────────┐
│ 常态 (40%)  │  ← 失去焦点
└─────────────┘
```

---

## 🎯 操作说明

### ✅ 正确操作

1. **选中按钮**
   - 应用启动时，"开始录制"按钮默认已选中（80% 描边）
   - 或使用 ↑↓ 键在多个按钮间导航

2. **点击触摸板触发**
   - 确认按钮有焦点（描边 80%）
   - **点击触摸板**（ENTER 键）
   - 看到描边瞬间变为 100%
   - 释放时触发动作

### ❌ 错误理解

- ❌ **不需要长按** ENTER 键
  - 原因：长按会唤起 AI 助手
  - 正确：快速点击即可

- ❌ **不需要按住观察**按下状态
  - 原因：只是瞬间反馈
  - 正确：点击时会自动看到 100% 状态

---

## 🎨 设计细节

### 颜色规范

| 元素 | 颜色 | 说明 |
|------|------|------|
| **背景** | 透明 | 融入黑色背景 |
| **描边** | Rokid Green (#40FF5E) | 透明度可变 |
| **文字** | 白色 (#FFFFFF) | 清晰易读 |

### 尺寸规范

| 属性 | 值 | 说明 |
|------|-----|------|
| **高度** | 56dp | 标准按钮高度 |
| **宽度** | 填满 | fillMaxWidth |
| **圆角** | 12dp | Rokid 标准 |
| **描边宽度** | 2dp | Rokid 标准 |
| **文字大小** | 24sp | 二级字号 |
| **行高** | 32sp | 标准行高 |

---

## 📋 按钮类型

### 1. 单按钮（RokidRecordButton）

**用途**：
- "开始录制"（待机时）

**外观**：
```
┌──────────────────────┐
│                      │
│   [开始录制]          │  ← 绿色描边，白色文字
│                      │
└──────────────────────┘
```

**代码位置**：
```kotlin
RokidRecordButton(
    text = "开始录制",
    isRecording = false,
    onClick = { /* 开始录制 */ }
)
```

---

### 2. 权限按钮（RokidPermissionButton）

**用途**：
- "授予权限"（首次启动）

**外观**：
```
需要授予权限

┌──────────────────────┐
│                      │
│   [授予权限]          │  ← 绿色描边，白色文字
│                      │
└──────────────────────┘
```

**代码位置**：
```kotlin
RokidPermissionButton(
    onClick = { /* 请求权限 */ }
)
```

---

### 3. 双按钮（RokidDualButtons）

**用途**：
- "后台运行" + "停止录制"（录制中）

**外观**：
```
┌──────────────────────┐
│   [后台运行]          │  ← 80% 描边（有焦点）
└──────────────────────┘

┌──────────────────────┐
│   [停止录制]          │  ← 40% 描边（无焦点）
└──────────────────────┘
```

**导航**：
- 按 ↓ 键：焦点从"后台运行"移到"停止录制"
- 按 ↑ 键：焦点从"停止录制"回到"后台运行"

**代码位置**：
```kotlin
RokidDualButtons(
    onMinimize = { /* 后台运行 */ },
    onStop = { /* 停止录制 */ }
)
```

---

## 🆚 对比：填充 vs 描边

### 更新前（填充样式）❌

```
┌──────────────────────┐
│ ████████████████████ │  ← 绿色填充背景
│ │  开始录制(黑字)  │ │  ← 黑色文字
│ ████████████████████ │
└──────────────────────┘
```

**问题**：
- ❌ 背景填充颜色，视觉过重
- ❌ 黑色文字在某些情况下不够清晰
- ❌ 不符合 Rokid 设计规范

---

### 更新后（描边样式）✅

```
┌──────────────────────┐
│ ░░░░░░░░░░░░░░░░░░░░ │  ← 绿色描边（透明度可变）
│ │  开始录制(白字)  │ │  ← 白色文字
│ ░░░░░░░░░░░░░░░░░░░░ │
└──────────────────────┘
黑色背景（透明）
```

**优势**：
- ✅ 背景透明，视觉轻盈
- ✅ 白色文字清晰易读
- ✅ 符合 Rokid 设计规范
- ✅ 通过描边透明度表达状态

---

## 💡 设计原理

### 为什么用描边而不是填充？

1. **视觉层次更清晰**
   - 描边：轻量级，不抢焦点
   - 填充：视觉过重，干扰内容

2. **状态区分更自然**
   - 描边透明度变化：微妙但清晰
   - 填充颜色变化：突兀，不够优雅

3. **符合设计趋势**
   - 现代 UI 偏向轻量化
   - 描边按钮更简洁

4. **适配黑色背景**
   - 透明按钮融入背景
   - 白色文字对比度高

---

## 🧪 测试要点

### 测试 1：常态（40%）

**操作**：
1. 应用启动
2. 观察"开始录制"按钮

**预期**：
- ✅ 看到淡淡的绿色描边（40%）
- ✅ 白色文字清晰可读
- ✅ 背景透明（看到黑色）

---

### 测试 2：选中（80%）

**操作**：
1. 按钮默认有焦点
2. 或用方向键导航到按钮

**预期**：
- ✅ 描边明显变亮（80%）
- ✅ 比常态更醒目
- ✅ 清晰提示"可以点击"

---

### 测试 3：按下（100%）

**操作**：
1. 确保按钮有焦点（80%）
2. **快速点击触摸板**
3. 观察描边瞬间变化

**预期**：
- ✅ 点击瞬间，描边变为最亮（100%）
- ✅ 释放时触发录制
- ✅ 描边回到 80%

---

### 测试 4：双按钮导航

**操作**：
1. 开始录制，进入录制状态
2. 看到两个按钮
3. 按 ↓ 键切换焦点

**预期**：
- ✅ "后台运行"：80% → 40%
- ✅ "停止录制"：40% → 80%
- ✅ 导航流畅

---

## ✅ 技术实现

### 核心代码

```kotlin
Box(
    modifier = Modifier
        .fillMaxWidth()
        .height(56.dp)
        .background(Color.Transparent)  // ✅ 背景透明
        .border(
            width = 2.dp,
            color = RokidGreen.copy(alpha = borderAlpha),  // ✅ 动态透明度
            shape = RoundedCornerShape(12.dp)
        )
        .focusRequester(focusRequester)
        .onFocusChanged { isFocused = it.isFocused }
        .onKeyEvent { keyEvent ->
            when (keyEvent.key) {
                Key.Enter, Key.DirectionCenter -> {
                    if (keyEvent.type == KeyEventType.KeyDown) {
                        isPressed = true  // ✅ 按下时设置
                        true
                    } else if (keyEvent.type == KeyEventType.KeyUp) {
                        isPressed = false
                        if (isFocused) onClick()  // ✅ 释放时触发
                        true
                    } else false
                }
                else -> false
            }
        }
        .focusable(),
    contentAlignment = Alignment.Center
) {
    Text(
        text = text,
        fontSize = 24.sp,
        lineHeight = 32.sp,
        fontWeight = FontWeight.Medium,
        color = Color.White  // ✅ 白色文字
    )
}
```

### 透明度计算

```kotlin
val borderAlpha = when {
    isPressed -> 1.0f        // 按下：100%
    isFocused -> 0.8f        // 选中：80%
    else -> 0.4f             // 常态：40%
}
```

---

## 📚 相关文档

1. **设计规范**：`DESIGN_SPEC_UPDATE.md`
2. **按钮状态**：`BUTTON_STATES_UPDATE.md`
3. **导航指南**：`NAVIGATION_GUIDE.md`
4. **测试指南**：`BUTTON_TEST_GUIDE.md`

---

## 🎯 关键改进总结

### 视觉设计

- ✅ 填充样式 → 描边样式
- ✅ 黑色文字 → 白色文字
- ✅ 有色背景 → 透明背景
- ✅ 固定描边 → 动态透明度

### 交互设计

- ✅ 明确"点击"操作（不是长按）
- ✅ 三种状态清晰区分
- ✅ 瞬间反馈按下动作
- ✅ 符合 Rokid 触摸板交互习惯

### 代码质量

- ✅ 移除不必要的 Button 组件
- ✅ 简化参数（移除 backgroundColor、textColor）
- ✅ 统一样式（所有按钮一致）
- ✅ 注释完整

---

**描边按钮设计完成！** 🎉

现在所有按钮都是：
- 透明背景
- 绿色描边（动态透明度）
- 白色文字
- 点击触摸板触发

完全符合 Rokid 设计规范！✨

