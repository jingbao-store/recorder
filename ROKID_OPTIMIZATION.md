# Rokid 眼镜专属优化

## 🕶️ 设备信息

- **设备型号**: Rokid RG-glasses
- **系统版本**: YodaOS-Sprite (Android 12, API 32)
- **屏幕尺寸**: 480x640 像素（竖屏）
- **输入方式**: 触摸板（方向键导航）

## 🎨 界面设计优化

### 遵循 Rokid 设计规范

基于官方设计规范 ([Rokid YodaOS-Sprite 设计规范](https://custom.rokid.com/prod/rokid_web/57e35cd3ae294d16b1b8fc8dcbb1b7c7/pc/cn/2786298057084a82b170bf725aef6b5d.html))：

#### 颜色规范
- **主色**: #40FF5E（Rokid 绿色）
- **背景**: #000000（纯黑）
- **文字**: 白色及半透明白色
- **录制状态**: 红色 (#FF4444)

#### 字体规范
- **一级标题**: 32px, Medium
- **二级文字**: 24px, Medium
- **三级文字**: 20px, Regular
- **提示文字**: 16px, Regular

#### 布局规范
- **圆角**: 12px
- **描边**: 1.5px
- **按钮高度**: 56px
- **间距**: 24px（外边距）, 16px（内边距）

### 适配小屏幕

480x640 是非常小的屏幕，界面做了以下优化：

1. **简化布局**
   - 移除不必要的装饰元素
   - 集中显示核心信息
   - 大字体确保可读性

2. **垂直布局**
   - 顶部：标题和状态
   - 中间：录制状态和时长
   - 底部：控制按钮

3. **高对比度**
   - 黑色背景 + 绿色/白色文字
   - 清晰可见，护眼

## 🎮 触摸板控制优化

### 输入设备信息

Rokid 眼镜使用触摸板（`ROKID,PSOC-TP-R`）进行控制：

```
支持的按键：
- KEY_ENTER  → 确认/点击
- KEY_UP     → 向上导航
- KEY_DOWN   → 向下导航
- KEY_LEFT   → 向左导航
- KEY_RIGHT  → 向右导航
- KEY_BACK   → 返回
```

### 焦点导航实现

界面已优化支持方向键导航：

1. **自动焦点**
   - 按钮自动获取焦点
   - 使用 `FocusRequester` 管理焦点
   - 焦点时显示绿色边框（2px）

2. **简化交互**
   - 单个界面只有一个主要按钮
   - 无需复杂的上下左右切换
   - 直接按 ENTER 键确认操作

3. **视觉反馈**
   - 焦点时：绿色边框
   - 按下时：原生 Material 3 涟漪效果
   - 录制中：红色按钮 + 红点闪烁

## 📹 录制配置优化

### 视频参数（针对 Rokid 优化）

```kotlin
videoWidth = 480         // 匹配屏幕宽度
videoHeight = 640        // 匹配屏幕高度
videoFps = 30            // 流畅 30fps
videoBitrate = 4_000_000 // 4 Mbps（降低以适配性能）
```

**为什么降低分辨率？**
- 480x640 已经是原生分辨率，无需更高
- 降低码率减少 CPU/GPU 负载
- 更长的录制时间，更低的发热
- 文件更小，更快的传输

### 画中画配置

```kotlin
pipWidthRatio = 0.30f    // 摄像头占 30% 宽度
pipHeightRatio = 0.25f   // 摄像头占 25% 高度
pipMarginRatio = 0.03f   // 3% 边距
pipCornerRadius = 12f    // 12px 圆角（符合规范）
```

画中画位置：**右下角**
- 不遮挡主要内容
- 摄像头画面清晰可见
- 符合视觉习惯

## 🚀 性能优化

### 针对 Rokid 的优化措施

1. **降低分辨率**
   - 从 1920x1080 降至 480x640
   - 减少 85% 的像素处理量
   - 显著降低 CPU/GPU 负载

2. **优化码率**
   - 从 8 Mbps 降至 4 Mbps
   - 减少编码压力
   - 降低功耗和发热

3. **硬件加速**
   - 使用 MediaCodec 硬件编码
   - OpenGL ES 硬件渲染
   - 最大化利用硬件性能

4. **简化界面**
   - 黑色背景（OLED 屏幕省电）
   - 最少的 Compose 组件
   - 高效的渲染

### 预期性能

- **帧率**: 稳定 30fps
- **发热**: 中等（可持续录制 15-20 分钟）
- **电量**: 约 2-3%/分钟
- **文件大小**: 约 30MB/分钟

## 📱 使用体验优化

### 操作流程（针对触摸板）

```
1. 打开应用
   ↓
2. 按 ENTER 键授予权限
   ↓
3. 按 ENTER 键开始录制
   ↓
4. 自动授予屏幕录制权限
   ↓
5. 应用自动最小化
   ↓
6. 使用其他应用（都会被录制）
   ↓
7. 通知栏停止 或 重新打开应用按 ENTER 停止
```

### 关键改进

1. **单键操作**
   - 主要操作只需按 ENTER 键
   - 无需复杂的方向键导航
   - 快速高效

2. **自动流程**
   - 权限请求自动弹出
   - 录制开始自动后台
   - 通知栏自动显示

3. **视觉反馈**
   - 焦点时绿色边框
   - 录制时红点闪烁
   - 时长实时更新

## 🎯 实际测试建议

### 在 Rokid 设备上测试

1. **基础功能测试**
```bash
# 安装应用
adb -s 1901092534000358 install -r app/build/outputs/apk/debug/app-debug.apk

# 启动应用
adb -s 1901092534000358 shell am start -n com.jingbao.recorder/.MainActivity

# 查看日志
adb -s 1901092534000358 logcat -s RecordingService:D
```

2. **触摸板测试**
```bash
# 实时监控触摸板事件
adb -s 1901092534000358 shell getevent -l

# 测试焦点导航
# 在设备上按上下左右键，观察焦点变化
# 按 ENTER 键触发按钮点击
```

3. **性能测试**
```bash
# 录制 5 分钟，观察：
# - 帧率是否稳定
# - 设备是否过热
# - 电量消耗
# - 视频质量

# 查看 CPU 使用率
adb -s 1901092534000358 shell top -n 1 | grep com.jingbao.recorder
```

### 优化建议

如果发现性能问题：

**降低帧率**
```kotlin
videoFps = 24  // 从 30 降至 24
```

**进一步降低码率**
```kotlin
videoBitrate = 3_000_000  // 3 Mbps
```

**调整画中画大小**
```kotlin
pipWidthRatio = 0.25f  // 从 30% 降至 25%
```

## 📐 屏幕适配对比

### 标准手机 vs Rokid 眼镜

| 项目 | 标准手机 | Rokid 眼镜 | 优化措施 |
|------|---------|-----------|---------|
| 分辨率 | 1920x1080 | 480x640 | ✅ 降低分辨率 |
| 输入方式 | 触摸屏 | 触摸板 | ✅ 焦点导航 |
| 屏幕大小 | 6+ 英寸 | 小型显示 | ✅ 大字体 |
| 交互方式 | 点击/滑动 | 方向键 | ✅ 简化操作 |
| 颜色 | 彩色 | 高对比 | ✅ 黑底绿字 |

## 🎨 设计规范参考

完整设计规范请查看：
[Rokid YodaOS-Sprite 设计规范](https://custom.rokid.com/prod/rokid_web/57e35cd3ae294d16b1b8fc8dcbb1b7c7/pc/cn/2786298057084a82b170bf725aef6b5d.html?documentId=d0db23be629d4b09be197bd0dd931298)

### 核心设计原则

1. **简洁至上**
   - 小屏幕，大字体
   - 只显示必要信息
   - 避免复杂布局

2. **高可读性**
   - 高对比度配色
   - 清晰的层次结构
   - 足够的间距

3. **高效交互**
   - 最少的步骤
   - 明确的操作反馈
   - 流畅的导航

## ✅ 已实现的 Rokid 优化

- [x] 480x640 竖屏适配
- [x] 方向键焦点导航
- [x] Rokid 设计规范配色
- [x] 32px/24px 字体规格
- [x] 12px 圆角设计
- [x] 单键确认操作
- [x] 自动焦点管理
- [x] 降低录制分辨率
- [x] 优化码率和性能
- [x] 黑色背景省电

## 🎉 效果预览

录制的视频将完美适配 Rokid 眼镜：
- **480x640 原生分辨率**
- **流畅 30fps**
- **清晰的画中画**
- **完整的 AR 体验记录**

现在就安装到你的 Rokid 眼镜试试吧！🚀

